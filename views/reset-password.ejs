<%- include('./partials/header') %>

<!-- Main Content for Change Password Page -->
<div class="w-full h-screen flex items-center justify-center px-4 md:px-20 bg-gray-100">
  <div class="w-full max-w-md bg-white p-8 rounded-lg shadow-lg">
    <h4 class="text-3xl font-bold text-center mb-6 text-gray-700">Change Password</h4>

    <!-- Change Password Form -->
    <form action="/reset-password" method="POST" onsubmit="return validatePassword()" class="space-y-4">
      
      <!-- New Password -->
      <div class="relative">
        <label for="newPassword" class="block text-sm font-medium text-gray-700">New Password</label>
        <input
          type="password"
          id="newPassword"
          name="newPassword"
          class="block bg-zinc-100 w-full px-4 py-3 border border-zinc-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 transition duration-200"
          required
        />
        <span class="absolute inset-y-0 right-3 flex items-center cursor-pointer" onclick="togglePassword('newPassword')">
          üëÅÔ∏è
        </span>
      </div>

      <!-- Confirm New Password -->
      <div class="relative">
        <label for="confirmNewPassword" class="block text-sm font-medium text-gray-700">Confirm New Password</label>
        <input
          type="password"
          id="confirmNewPassword"
          name="confirmNewPassword"
          class="block bg-zinc-100 w-full px-4 py-3 border border-zinc-300 rounded-md focus:outline-none focus:ring-2 focus:ring-teal-500 transition duration-200"
          required
        />
        <span class="absolute inset-y-0 right-3 flex items-center cursor-pointer" onclick="togglePassword('confirmNewPassword')">
          üëÅÔ∏è
        </span>
        <p id="passwordError" class="text-red-500 text-sm mt-1 hidden">New Passwords do not match!</p>
      </div>

      <!-- Submit Button -->
      <div>
        <button
          type="submit"
          class="w-full px-5 py-3 bg-blue-500 text-white rounded-full cursor-pointer transition duration-200 hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-teal-500"
        >
          Change Password
        </button>
      </div>
    </form>
  </div>
</div>

<script>
  function togglePassword(fieldId) {
    const field = document.getElementById(fieldId);
    field.type = field.type === "password" ? "text" : "password";
  }

  function validatePassword() {
    const newPassword = document.getElementById("newPassword").value;
    const confirmNewPassword = document.getElementById("confirmNewPassword").value;
    const errorText = document.getElementById("passwordError");

    if (newPassword !== confirmNewPassword) {
      errorText.classList.remove("hidden"); // Show error message
      return false; // Prevent form submission
    } else {
      errorText.classList.add("hidden"); // Hide error message
      return true; // Allow form submission
    }
  }
</script>

<%- include('./partials/footer') %>